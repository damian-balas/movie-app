(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{26:function(e,t,a){e.exports=a(47)},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),l=a(10),o=(a(31),a(4)),i=a(5),u=a(7),m=a(6),f=a(8),v=a(12),h=(a(32),function(){return r.a.createElement("header",{className:"header"},r.a.createElement(l.b,{className:"logo",to:"/"},"Movie App"),r.a.createElement(l.b,{className:"link",to:"/favs"},r.a.createElement("span",{"aria-label":"Favourites page",className:"fas fa-heart"})))}),p=a(11),d=(a(41),function(e){var t=e.favs,a=e.handleFavButttonClicked,n=e.id,s=e.Title,c=e.Poster;return r.a.createElement("div",{className:"movie-item"},r.a.createElement("div",{className:"img-wrapper"},"N/A"===c?r.a.createElement("span",{className:"no-img"},"Image not found"):r.a.createElement("img",{className:"img",src:"".concat(c),alt:s})),r.a.createElement("div",{className:"btns-group"},r.a.createElement(l.b,{to:"/movie/".concat(n),className:"info-btn"},r.a.createElement("span",{"aria-label":"More information about ".concat(s),className:"fas fa-info"})),r.a.createElement("button",{"aria-label":"Add to favourites",className:"fav-btn",value:n,onClick:a},t.includes(n)?r.a.createElement("span",{"aira-hidden":"true",className:"fas fa-heart"}):r.a.createElement("span",{"aira-hidden":"true",className:"far fa-heart"}))))}),b=(a(42),a(43),function(){return r.a.createElement("div",{className:"sk-folding-cube"},r.a.createElement("div",{className:"sk-cube1 sk-cube"}),r.a.createElement("div",{className:"sk-cube2 sk-cube"}),r.a.createElement("div",{className:"sk-cube4 sk-cube"}),r.a.createElement("div",{className:"sk-cube3 sk-cube"}))}),E=function(e){return Object(p.usePromiseTracker)().promiseInProgress&&r.a.createElement(b,null)},g=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.movies!==this.props.movies||e.favs!==this.props.favs}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"movie-grid"},this.props.movies?this.props.movies.map((function(t){var a=t.imdbID,n=t.Title,s=t.Poster;return r.a.createElement(d,{key:a,id:a,Title:n,Poster:s,favs:e.props.favs,handleFavButttonClicked:e.props.handleFavButttonClicked})})):null,this.props.loadingIndicatorOff?null:r.a.createElement(E,null))}}]),t}(n.Component),k=(a(44),function(e){return r.a.createElement("form",{autoComplete:"off",className:"form"},r.a.createElement("label",{className:"label",htmlFor:"query"},"Search Movie:"," "),r.a.createElement("input",{placeholder:"Search for movies...",className:"search-input",onChange:e.handleChange,type:"text",name:"query",id:"query"}),r.a.createElement("button",{className:"submit-btn",onClick:e.handleSubmit,type:"submit"},r.a.createElement("span",{"aria-hidden":"true",className:"fas fa-search"})))}),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState({query:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.signal;Object(p.trackPromise)(fetch("https://www.omdbapi.com/?s=".concat(a.state.query,"&apikey=251e77f3"),{signal:t}).then((function(e){return e.json()})).then((function(e){a.setState({movies:e.Search})})).catch((function(e){return console.log(e.message)})))},a.state={movies:"",query:""},a.controller=new AbortController,a.signal=a.controller.signal,a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){console.log("hi"),this.controller.abort()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(k,{handleChange:this.handleChange,handleSubmit:this.handleSubmit}),r.a.createElement(E,null),r.a.createElement(g,{loadingIndicatorOff:!0,favs:this.props.favs,handleFavButttonClicked:this.props.handleFavButttonClicked,movies:this.state.movies}))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={movies:[]},a.controller=new AbortController,a.signal=a.controller.signal,a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"componentDidMount",value:function(){var e=this,t=this.signal;this.props.favs.forEach((function(a){Object(p.trackPromise)(fetch("https://omdbapi.com/?apikey=251e77f3&i=".concat(a),{signal:t}).then((function(e){return e.json()})).then((function(t){return e.setState((function(e){return{movies:e.movies.concat(t)}}))})))}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(g,{favs:this.props.favs,handleFavButttonClicked:this.props.handleFavButttonClicked,movies:this.state.movies}))}}]),t}(n.Component),j=(a(45),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={movie:""},a.controller=new AbortController,a.signal=a.controller.signal,a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=this.signal;Object(p.trackPromise)(fetch("https://omdbapi.com/?apikey=251e77f3&i=".concat(t,"&plot=full"),{signal:a}).then((function(e){return e.json()})).then((function(t){return e.setState({movie:t},(function(){"False"===e.state.movie.Response&&e.props.history.replace("/")}))})))}},{key:"render",value:function(){var e=this.state.movie,t=e.Poster,a=e.Title,s=e.Plot,c=e.Genre,l=e.Released,o=e.Actors,i=e.imdbRating,u=e.Runtime;return r.a.createElement(n.Fragment,null,r.a.createElement(E,null),this.state.movie?r.a.createElement("div",{className:"movie-info"},r.a.createElement("div",{className:"img-wrapper"},"N/A"===t?r.a.createElement("span",{className:"no-img"},"Image not found"):r.a.createElement("img",{className:"img",src:"".concat(t),alt:a})),r.a.createElement("h2",{className:"title"},a),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"released"},l),r.a.createElement("span",{className:"runtime"},u),r.a.createElement("span",null,i," / 10")),r.a.createElement("span",{className:"genre"},c),r.a.createElement("span",{className:"actors"},o),r.a.createElement("p",{className:"plot"},s),r.a.createElement("button",{"aria-label":"Add to favourites",className:"fav-btn",value:this.props.match.params.id,onClick:this.props.handleFavButttonClicked},this.props.favs.includes(this.props.match.params.id)?r.a.createElement("span",{"aira-hidden":"true",className:"fas fa-heart"}):r.a.createElement("span",{"aira-hidden":"true",className:"far fa-heart"}))):null)}}]),t}(n.Component)),C=(a(46),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).saveInLocalStorage=function(e){localStorage.setItem("favs",JSON.stringify(e))},e.handleFavButttonClicked=function(t){var a=t.currentTarget.value;e.state.favs.includes(a)?e.setState((function(e){return{favs:e.favs.filter((function(e){return e!==a}))}}),(function(){e.saveInLocalStorage(e.state.favs)})):e.setState((function(e){return{favs:e.favs.concat(a)}}),(function(){e.saveInLocalStorage(e.state.favs)}))},e.state={movies:"",query:"",favs:localStorage.favs?JSON.parse(localStorage.favs):[]},e}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.state.favs)}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(h,null),r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/favs",render:function(){return r.a.createElement(O,{favs:e.state.favs,handleFavButttonClicked:e.handleFavButttonClicked})}}),r.a.createElement(v.a,{exact:!0,path:"/movie/:id",render:function(t){return r.a.createElement(j,Object.assign({},t,{favs:e.state.favs,handleFavButttonClicked:e.handleFavButttonClicked}))}}),r.a.createElement(v.a,{path:"/",render:function(){return r.a.createElement(N,{favs:e.state.favs,handleFavButttonClicked:e.handleFavButttonClicked})}})))}}]),t}(n.Component));c.a.render(r.a.createElement(l.a,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.560a8531.chunk.js.map